(this["webpackJsonpreact-save-links"]=this["webpackJsonpreact-save-links"]||[]).push([[0],{78:function(e,t,n){e.exports=n(89)},83:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(10),c=n.n(i),o=(n(83),n(133)),u=n(142),l=n(6),s=n.n(l),p=n(11),d=n(17),f=n(130),m=n(140),k=n(134),y=n(136),v=n(135),h=n(62),b=n.n(h),g=n(19),O=n(132),x=n(141),w=n(144),j=n(131),H=n(128),E=n(129),S=n(127);function C(e){var t=Object(r.useState)(e.title||""),n=Object(d.a)(t,2),i=n[0],c=n[1],o=Object(r.useState)(e.url||"https://"),u=Object(d.a)(o,2),l=u[0],s=u[1],p=Object(r.useState)(null),f=Object(d.a)(p,2),m=f[0],k=f[1],y=function(){""===l.trim()?k('You must enter a hyperlink to be saved for later. E.g. "https://example.com"'):v(l)?(k(null),e.id?h():b(),I()):k('The hyperlink you entered is not valid. Valid example: "https://example.com"')},v=function(e){return e.length>9&&("http://"===e.substr(0,7)||"https://"===e.substr(0,8))},h=function(){var t=Object(g.a)({id:e.id},C());e.onUpdateHyperlink(t)},b=function(){var t=C();e.onSaveNewHyperlink(t)},C=function(){var e={url:l.trim()};return i&&(e.title=i.trim()),e},I=function(){e.onCloseDialog()};return a.a.createElement(w.a,{"aria-labelledby":"form-dialog-title",open:e.open,onEnter:function(){c(e.title||""),s(e.url||"https://"),k(null)},onClose:I},a.a.createElement(S.a,{id:"form-dialog-title"},"Save For Later"),a.a.createElement(H.a,null,a.a.createElement(E.a,null,"What do you want to read, watch, play or listen to?"),a.a.createElement(x.a,{margin:"dense",type:"text",fullWidth:!0,id:"title",label:"Title (optional)",value:i,onChange:function(e){return c(e.target.value)}}),a.a.createElement(x.a,{autoFocus:!0,margin:"dense",type:"text",required:!0,fullWidth:!0,error:m,helperText:m||" ",id:"url",label:"Url",onKeyUp:function(e){"Enter"===e.key&&y()},value:l,onChange:function(e){return s(e.target.value)}})),a.a.createElement(j.a,null,a.a.createElement(O.a,{color:"primary",onClick:I},"Cancel"),a.a.createElement(O.a,{color:"primary",onClick:y},"Save Link")))}var I=Object(o.a)((function(e){return{addHyperlink:{color:e.palette.text.hint}}}));function T(e){var t=I(),n=Object(r.useState)(!1),i=Object(d.a)(n,2),c=i[0],o=i[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(k.a,{className:t.addHyperlink,button:!0,component:"button",onClick:function(){o(!0)}},a.a.createElement(v.a,null,a.a.createElement(b.a,null)),a.a.createElement(y.a,null,"New Hyperlink")),a.a.createElement(C,{url:"https://",open:c,onCloseDialog:function(){o(!1)},onSaveNewHyperlink:e.onSaveNewHyperlink}))}var U=n(137),D=n(139),N=n(138),B=n(63),F=n.n(B),L=n(64),z=n.n(L),A=Object(o.a)((function(e){return{hyperlink:{color:"blue"},hyperlinkVisited:{color:"purple",textDecorationLine:"line-through"}}}));function P(e){return a.a.createElement(M,{id:e.id,title:e.title,url:e.url,onUpdateHyperlink:e.onUpdateHyperlink},a.a.createElement(v.a,null,a.a.createElement(F.a,null)),a.a.createElement(V,{id:e.id,title:e.title,url:e.url,visited:e.visited,onUpdateHyperlinkAsVisited:function(){var t={id:e.id,visited:!0};e.onUpdateHyperlink(t)}}),a.a.createElement(U.a,null,a.a.createElement(N.a,{onClick:function(){var t={id:e.id};e.onDeleteHyperlink(t)}},a.a.createElement(z.a,null))))}function M(e){var t=A(),n=Object(r.useState)(!1),i=Object(d.a)(n,2),c=i[0],o=i[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(k.a,{className:e.visited?t.hyperlinkVisited:t.hyperlink,button:!0,component:"button",onClick:function(){o(!0)}},e.children),a.a.createElement(C,{id:e.id,title:e.title,url:e.url,open:c,onCloseDialog:function(){o(!1)},onUpdateHyperlink:e.onUpdateHyperlink}))}function V(e){var t=A(),n=function(){var t={id:e.id,visited:!0};e.onUpdateHyperlinkAsVisited(t)};return a.a.createElement(y.a,null,a.a.createElement(D.a,{className:e.visited?t.hyperlinkVisited:t.hyperlink,button:"true",component:"a",href:e.url,target:"_blank",rel:"noopener noreferrer",onClick:function(e){n(),e.stopPropagation()}},e.title||e.url))}var W,q,J=n(40),R=n(47),Y=n(48),Z=n(53),K={"3dbd8r9v65gy0iyzrgdyr":{id:"3dbd8r9v65gy0iyzrgdyr",title:"Example.com",url:"https://example.com",createdOn:"2020-03-31T01:11:11.948Z"},"7rm3t370equwsquzsz0nn":{id:"7rm3t370equwsquzsz0nn",url:"https://google.com",visited:!0,createdOn:"2020-03-31T02:22:22.948Z"}},$=new(function(){function e(){Object(R.a)(this,e),this.initIndexedDb()}return Object(Y.a)(e,[{key:"getHyperlinks",value:function(){var e=Object(p.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.getAllFromIndex("hyperlinks","createdOn");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"addOrUpdateHyperlink",value:function(){var e=Object(p.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.put("hyperlinks",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteHyperlink",value:function(){var e=Object(p.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.delete("hyperlinks",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"initIndexedDb",value:function(){var e=Object(p.a)(s.a.mark((function e(){var t,n,r=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]&&r[0],e.next=3,Object(Z.b)("savelinksforlater",2,{upgrade:function(e,t,n,r){switch(t){case 0:case 1:var a=e.createObjectStore("hyperlinks",{keyPath:"id",autoIncrement:!1});a.createIndex("id","id"),a.createIndex("title","title"),a.createIndex("url","url"),a.createIndex("visited","visited"),a.createIndex("createdOn","createdOn")}},blocked:function(){},blocking:function(){},terminated:function(){}});case 3:if(n=e.sent,!t){e.next=7;break}return e.next=7,this.initMockHyperlinks(n);case 7:W=n;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteIndexedDb",value:function(){var e=Object(p.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.a)("savelinksforlater",{blocked:function(){}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"initMockHyperlinks",value:function(){var e=Object(p.a)(s.a.mark((function e(t){var n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.transaction("hyperlinks","readwrite"),e.t0=s.a.keys(K);case 2:if((e.t1=e.t0()).done){e.next=10;break}if(r=e.t1.value,K.hasOwnProperty(r)){e.next=6;break}return e.abrupt("return");case 6:a=K[r],n.store.put("hyperlinks",a),e.next=2;break;case 10:return e.next=12,n.done;case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),_=new(function(){function e(){Object(R.a)(this,e),q={}}return Object(Y.a)(e,[{key:"getHyperlinks",value:function(){var e=Object(p.a)(s.a.mark((function e(){var t=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadLocalHyperlinks();case 2:return e.abrupt("return",new Promise((function(e,n){setTimeout((function(){var n=t.getHyperlinksArraySorted();e(n)}),500)})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createHyperlink",value:function(){var e=Object(p.a)(s.a.mark((function e(t){var n=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){setTimeout(Object(p.a)(s.a.mark((function r(){var a,i,c,o;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=n.generateUid(),i=Object(g.a)({id:a},t,{createdOn:n.getISOTimestamp()}),c=Object(g.a)({},q,Object(J.a)({},a,i)),q=c,r.t0=$,!r.t0){r.next=8;break}return r.next=8,$.addOrUpdateHyperlink(i);case 8:o=n.getHyperlinksArraySorted(),e(o);case 10:case"end":return r.stop()}}),r)}))),500)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateHyperlink",value:function(){var e=Object(p.a)(s.a.mark((function e(t){var n=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){setTimeout(Object(p.a)(s.a.mark((function r(){var a,i;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((a=Object(g.a)({},q))[t.id]=Object.assign(a[t.id],t),q=a,r.t0=$,!r.t0){r.next=7;break}return r.next=7,$.addOrUpdateHyperlink(a[t.id]);case 7:i=n.getHyperlinksArraySorted(),e(i);case 9:case"end":return r.stop()}}),r)}))),500)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteHyperlink",value:function(){var e=Object(p.a)(s.a.mark((function e(t){var n=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){setTimeout(Object(p.a)(s.a.mark((function r(){var a,i;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(delete(a=Object(g.a)({},q))[t.id],q=a,r.t0=$,!r.t0){r.next=7;break}return r.next=7,$.deleteHyperlink(t.id);case 7:i=n.getHyperlinksArraySorted(),e(i);case 9:case"end":return r.stop()}}),r)}))),500)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getHyperlinksArraySorted",value:function(){return Object.entries(q).map((function(e){return e[1]})).sort(this.sortDescByISOTimestamp)}},{key:"generateUid",value:function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}},{key:"getISOTimestamp",value:function(){return(new Date).toISOString()}},{key:"sortDescByISOTimestamp",value:function(e,t){return e.createdOn>t.createdOn?-1:e.createdOn<t.createdOn?1:0}},{key:"loadLocalHyperlinks",value:function(){var e=Object(p.a)(s.a.mark((function e(){var t,n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!$){e.next=9;break}return t={},e.next=4,$.initIndexedDb();case 4:return e.next=6,$.getHyperlinks();case 6:for(n=e.sent,r=0;r<n.length;r++)a=Object.assign({},n[r]),t[a.id]=a;q=t;case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"initMockHyperlinks",value:function(){q=Object.assign({},K)}}]),e}()),G=Object(o.a)((function(e){return{root:{paddingTop:0,paddingBottom:0}}}));function Q(){var e=G(),t=Object(r.useState)([]),n=Object(d.a)(t,2),i=n[0],c=n[1];Object(r.useEffect)((function(){o()}),[]);var o=function(){var e=Object(p.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.getHyperlinks();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(p.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.createHyperlink(t);case 2:n=e.sent,c(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(p.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.updateHyperlink(t);case 2:n=e.sent,c(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(p.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.deleteHyperlink(t);case 2:n=e.sent,c(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=i.map((function(e){return a.a.createElement(a.a.Fragment,{key:e.id},a.a.createElement(P,{id:e.id,title:e.title,url:e.url,visited:e.visited,onUpdateHyperlink:function(e){return l(e)},onDeleteHyperlink:function(e){return k(e)}}),a.a.createElement(m.a,null))}));return a.a.createElement(f.a,{className:e.root},a.a.createElement(T,{onSaveNewHyperlink:function(e){return u(e)}}),a.a.createElement(m.a,null),y)}var X=Object(o.a)((function(e){return{app:{minHeight:"100%",display:"flex",flexDirection:"column"},appHeader:{paddingLeft:16,paddingRight:16,fontSize:"calc(8px + 1vmin)",backgroundColor:"#282c34",color:"white"},appHeaderH1:{marginTop:2,marginBottom:-10},appBody:{flex:1,backgroundColor:e.palette.background.default},appFooter:{paddingTop:8,paddingBottom:8,paddingLeft:16,paddingRight:16,fontSize:"calc(8px + 1vmin)",backgroundColor:"#282c34",color:"white"}}}));var ee=function(){var e=X(),t=(new Date).getFullYear();return a.a.createElement(u.a,{className:e.app},a.a.createElement("header",{className:e.appHeader},a.a.createElement("h1",{className:e.appHeaderH1},"Save Links for Later"),a.a.createElement("p",null,"What do you want to read, watch, play or listen to?")),a.a.createElement(u.a,{className:e.appBody},a.a.createElement(Q,null)),a.a.createElement("footer",{className:e.appFooter},"Copyright \xa9 ",t))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[78,1,2]]]);
//# sourceMappingURL=main.9919d345.chunk.js.map